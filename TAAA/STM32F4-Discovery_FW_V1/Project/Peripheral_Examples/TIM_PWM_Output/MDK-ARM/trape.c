/*============================================================================*/
/*	                       File Name: trape.c                                 */
/*============================================================================*/
#include "stm32f4_discovery.h"
#include "math.h"
#include "trape.h"

/*************************************************/
/*                     _____                     */
/*                    |  1  |                    */
/*           f ======>|  -  |=====> output       */
/*                    |  S  |                    */
/*                    |_____|                    */
/*************************************************/

#define PI 3.14159265358979

void TRAPE_calc(TRAPE *p)
{

	p->output = p->output + ((p->step/2)*(p->input + p->input_1));

	//limit  output = 2PI
	if (p->output >= 2*PI)
	{
		p->output -= (2*PI);
	}

	p->input_1 = p->input;
		
}
